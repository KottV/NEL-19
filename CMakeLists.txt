# This file was generated by FRUT's Jucer2CMake from "NEL-19.jucer"

cmake_minimum_required(VERSION 3.15)

project("NEL")

option (USE_SYSTEM_JUCE "Use JUCE found via CMake rather than the bundled one." OFF)
option (ENABLE_LV2 "Add LV2 format if JUCE supports it" OFF)

if (USE_SYSTEM_JUCE)
    find_package(JUCE CONFIG REQUIRED)
else()
    add_subdirectory ("G:/PluginDevelopment/JUCE" "JUCE")
endif()

juce_add_plugin(NEL
  VERSION "1.0.0"
  COMPANY_NAME "Mrugalla"

  FORMATS
    "VST3"
    "Standalone"

if (ENABLE_LV2)
    "LV2"
  LV2_URI https://github.com/Mrugalla/NEL-19
endif()

  PLUGIN_NAME "NEL"
  DESCRIPTION "Creative Vibrato For Travellers"
  PLUGIN_MANUFACTURER_CODE "Mrug"
  COPY_PLUGIN_AFTER_BUILD TRUE
  PLUGIN_CODE "Nel9"
  NEEDS_MIDI_INPUT TRUE
  VST3_CATEGORIES
    "Modulation"
  VST3_COPY_DIR "C:/Program Files/Common Files/VST3"
)

target_compile_features(NEL PUBLIC cxx_std_20)

juce_generate_juce_header(NEL)

target_compile_definitions(NEL
  PUBLIC
    JUCE_ENABLE_REPAINT_DEBUGGING=0
    JUCE_STRICT_REFCOUNTEDPOINTER=1
    JUCE_USE_CURL=0
    JUCE_VST3_CAN_REPLACE_VST2=0
    JUCE_WEB_BROWSER=0
	JUCE_DISPLAY_SPLASH_SCREEN=0
)

include_directories(Source)

target_sources(NEL
  PRIVATE
	"Source/dsp/DryWetProcessor.h"
	"Source/dsp/MidSideEncoder.h"
	"Source/dsp/ModsGUI.h"
	"Source/dsp/Modulator.h"
	"Source/dsp/Vibrato.h"
    "Source/modsys/ModSysGUI.cpp"
	"Source/modsys/ModSysGUI.h"
	"Source/modsys/ModSys.h"
	"Source/oversampling/ConvolutionFilter.h"
	"Source/oversampling/Filter.h"
	"Source/oversampling/IIRFilter.h"
	"Source/oversampling/Oversampling.h"
	"Source/releasePool/ReleasePool.h"
    "Source/releasePool/ReleasePool.cpp"
	"Source/Approx.h"
	"Source/Interpolation.h"
	"Source/Menu.h"
	"Source/NELG.h"
	"Source/Outtakes.h"
	"Source/PluginEditor.h"
    "Source/PluginEditor.cpp"
	"Source/PluginProcessor.h"
    "Source/PluginProcessor.cpp"
)

#A helper variable to make the decleration shorter:
set(SourceDir ${CMAKE_CURRENT_LIST_DIR}/Source)

file(GLOB_RECURSE resources
            "${SourceDir}/Img/*.*"
            "${SourceDir}/Font/*.*"
            "${SourceDir}/xml/*.*")
			
juce_add_binary_data(NEL_BinaryData SOURCES ${resources})

target_sources(NEL_BinaryData PRIVATE
  "${SourceDir}/xml/menu.xml"
)
set_source_files_properties("${SourceDir}/xml/menu.xml"
  PROPERTIES HEADER_FILE_ONLY TRUE
)

set_target_properties(NEL_BinaryData PROPERTIES
    POSITION_INDEPENDENT_CODE TRUE)

target_link_libraries(NEL
  PRIVATE
    NEL_BinaryData
    juce::juce_audio_basics
    juce::juce_audio_devices
    juce::juce_audio_formats
    juce::juce_audio_plugin_client
    juce::juce_audio_processors
    juce::juce_audio_utils
    juce::juce_core
    juce::juce_data_structures
    juce::juce_dsp
    juce::juce_events
    juce::juce_graphics
    juce::juce_gui_basics
    juce::juce_gui_extra
  PUBLIC
    juce::juce_recommended_config_flags
    juce::juce_recommended_lto_flags
    juce::juce_recommended_warning_flags
)

message (${resources})